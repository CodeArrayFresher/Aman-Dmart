@model IEnumerable<NestedTable.Models.OrderDetailModel>

@{
    ViewBag.Title = "ListOfOrders";
}

<h2 style="text-align:center;color:cornflowerblue">Order Table</h2>

@*<p>
        @Html.ActionLink("Create New", "Create")
    </p>*@
<table class="table table-bordered">
    <tr class="table-primary">
        <th class="check"><button id="showall" class="btn btn-primary">See All</button></th>
        <th>
            @Html.DisplayNameFor(model => model.Id)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Order_Date)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Customer_Name)
        </th>
      

    </tr>

    @foreach (var item in Model)
    {

        <tr>
            <td class="glyphicon glyphicon-plus">
                <img src="~/Content/plus.png" height="20" width="20" id="@("img"+item.Id)" />
                @*<div style="display:none">
                    <table class="table table-bordered">
                        <tr class="table-danger">
                            <th>Product_ID</th>
                            <th>Prdouct_Name</th>
                            <th>Quantity</th>
                            <th>Unit_price</th>
                            <th>Total_Amount</th>
                        </tr>

                        <tr>

                            <td> @Html.DisplayFor(modelItem => item.Product_ID)</td>
                            <td> @Html.DisplayFor(modelItem => item.Product_Name)</td>
                            <td> @Html.DisplayFor(modelItem => item.Total_Order_Quantity)</td>
                            <td> @Html.DisplayFor(modelItem => item.Unit_Price)</td>
                            <td> @Html.DisplayFor(modelItem => item.Total_Amount)</td>
                        </tr>
                    </table>
                </div>*@
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Id)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Order_Date)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Customer_Name)
            </td>
            
            @*<td>
                    @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
                    @Html.ActionLink("Details", "Details", new { id=item.Id }) |
                    @Html.ActionLink("Delete", "Delete", new { id=item.Id })
                </td>*@
        </tr>
    }

</table>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">

    var model = @Html.Raw(Json.Encode(Model));
    console.log(model);
        $('button').click(function () {
            $.each(model, function (index, item) {
            $("#img" + item.Id).trigger("click");
            });
        });


        $("table").on("click", "img[src*='plus.png']", function () {                                 //*= it will call al plus.png im
            $(this).closest("tr").after("<tr><td></td><td colspan = '9'>" + $(this).next().html() + "</td></tr>");
            $(this).attr("src", "/content/minus.png");
        });


        $("table").on("click", "img[src*='minus.png']", function () {
            $(this).attr("src", "/content/plus.png");
            $(this).closest("tr").next().remove();
        });

</script>










